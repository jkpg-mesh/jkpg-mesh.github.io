<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" type="image/png" href="../assets/M-POWERED.png">
    <title>jkpg-mesh</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link href="css/style.css" rel="stylesheet">
</head>
<body>
    <div id="navbar-placeholder"></div>
        <script>
            // Load navbar from external file
            fetch('navbar.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('navbar-placeholder').innerHTML = data;
                });
        </script>
    </div>

    <div class="container-fluid d-flex justify-content-center align-items-center"
        style="background-image: url('assets/main.jpg'); height: 400px; background-size: cover; background-position: center;">
        <div class="position-relative w-100">
            <div id="cardCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="4000">
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <div class="card mx-auto"
                            style="background-color: rgba(50, 50, 50, 0.6); border: 1px solid #ccc; border-radius: 10px; max-width: 800px; max-height: 400px;">
                            <div class="card-header bg-teal text-black text-center">
                                <h1 class="mb-0">The Meshtastic MQTT Relationship</h1>
                            </div>
                            <div class="card-body text-center text-white">
                                <p>If you've spent any time in the Meshtastic community beyond that initial buzz 
                                of excitedly opening your brand new unit, you‚Äôve heard the debates: to use or not to use MQTT?
                                <br>You quickly realize it‚Äôs some sort of link, a bridge that connects your long-range LoRa network 
                                to the wide-open internet. There are maps that show nodes across the world, and interact with 
                                far-away nodes. You decide to <a href="https://meshtastic.org/docs/configuration/module/mqtt/" 
                                target="_blank" rel="noopener">set it up</a>, and BOOM‚Äîyour local, off-grid network is now 
                                talking to the globe.
                                <br>What did you just step into? Let‚Äôs demystify the powerful relationship between MQTT and Meshtastic 
                                today.</p>
                                <a href="../blogs/blog13.html" class="btn text-black bg-teal btn-tealdark mt-3">L√§s mer...</a>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <div class="card mx-auto"
                            style="background-color: rgba(50, 50, 50, 0.6); border: 1px solid #ccc; border-radius: 10px; max-width: 800px; max-height: 400px;">
                            <div class="card-header bg-teal text-black text-center">
                                <h1 class="mb-0">"The Dove" is coming!</h1>
                            </div>
                            <div class="card-body text-center text-white">
                                <p>As with many things in the Meshtastic community, this project began with the excitement of 
                                    <strong>creating something useful</strong>, the opportunity to <strong>serve the community</strong>, 
                                    and the possibility of <strong>collaborating with fellow enthusiasts</strong>.
                                <br>
                                <br>
                                    The jkpg-mesh community consists of members who are actively working to expand the Meshtastic network, 
                                    but also to show others that Meshtastic puts the power to create <strong>hi-tech communication projects</strong> 
                                    into their hands ‚Äî with <strong>low entry constraints</strong>.</p>
                                <a href="../blogs/blog12.html" class="btn text-black bg-teal btn-tealdark mt-3">L√§s mer...</a>
                            </div>
                        </div>
                    </div> 
                    <div class="carousel-item">
                        <div class="card mx-auto"
                            style="background-color: rgba(50, 50, 50, 0.6); border: 1px solid #ccc; border-radius: 10px; max-width: 800px; max-height: 380px;">
                            <div class="card-header bg-teal text-black text-center">
                                <h1 class="mb-0">Meshtastic Jkpgmesh Intro</h1>
                            </div>
                            <div class="card-body text-center text-white">
                                <div class="ratio" style="aspect-ratio: 16/9; height: 280px;">
                                    <iframe id="youtubeVideo1" src="https://www.youtube.com/embed/Xz6xcXjco0w?enablejsapi=1&version=3&rel=0"
                                        title="YouTube video" allowfullscreen style="height: 100%; width: 100%;"></iframe>
                                </div>
                            </div>
                        </div>
                    </div>
                 </div>
                <button class="carousel-control-prev custom-arrow" type="button" data-bs-target="#cardCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next custom-arrow" type="button" data-bs-target="#cardCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        </div>
    </div>

    <div class="container-fluid bg-teal text-center">
        <h1>V√§lkommen till J√∂nk√∂ping Meshtastics</h1>
        <p>jkpg-mesh √§r en gemenskap som verkar f√∂r ett stabilt Meshtastic-n√§tverk i J√∂nk√∂pingsomr√•dets.</p>
    </div>



        <!-- Nyhet: Konstituerande m√∂te -->
    <div class="container-fluid text-center py-5 bg-dark text-white">
        <h1 class="mb-3">Nyhet</h1>
        <h3>Kallelse till konstituerande m√∂te f√∂r Jkpg Mesh</h3>
        <p class="mx-auto w-75 mt-3">
            Vi kallar till m√∂te kring bildandet av f√∂reningen <strong>Jkpg Mesh</strong> ‚Äì
            ett ideellt f√∂reningen f√∂r teknikintresserade, beredskapsentusiaster och nyfikna
            m√§nniskor som vill utforska Meshtastic och fria n√§tverk i J√∂nk√∂pingsomr√•det.
        </p>
        <div class="mt-4">
            <img src="assets/6nov.png" alt="Inbjudan till konstituerande m√∂te 6 november" 
                 class="img-fluid rounded shadow" style="max-width:600px;">
        </div>
        <p class="mt-4 mb-0 fw-light">
            üìç Huskvarnav√§gen 40 &nbsp;|&nbsp; üï† Tors 6 nov kl. 17.30<br>
            üí¨ O.S.A. till <a href="mailto:hello@jkpg-mesh.se" class="link-light">hello@jkpg-mesh.se</a>
        </p>
    </div>

    
    <div class="container-fluid text-center">
        <h1>Varf√∂r Meshtastic?</h1>
        <div class="mx-auto w-75 text-start">
            <p>Meshtastic √§r inte bara √§nnu en meddelandeapp - det √§r en port till en v√§rld d√§r √∂ppen kommunikation
                m√∂ter praktiskt experimenterande. √Ñven om m√•nga plattformar erbjuder mer polerade meddelandetj√§nster,
                √§r Meshtastic unikt i att det ger anv√§ndare m√∂jligheten att bygga och ut√∂ka sina egna decentraliserade
                n√§tverk med prisv√§rd h√•rdvara. Det handlar inte bara om att h√•lla kontakten, utan om att skapa robusta,
                direktanv√§nda kommunikationssystem som fungerar d√§r vanliga n√§tverk inte r√§cker - p√• bergstoppar,
                avl√§gsna vandringsleder, avkopplande stugor utan t√§ckning och √§ven vid kriser n√§r infrastrukturen faller bort.</p>
            <p>Det som g√∂r Meshtastic speciellt √§r hur det samlar en livlig gemenskap av antennbyggare, elektronikentusiaster,
                mikrokontrollfantaster och mjukvaruutvecklare. Oavsett om du gillar att l√∂da egna kretskort, skriva egen
                firmware eller bara experimentera med mesh-n√§tverk, s√• v√§lkomnar Meshtastic dig - och det kr√§vs ingen
                amat√∂rradiolicens. Det √§r en plattform som befinner sig i sk√§rningspunkten mellan praktisk teknik och
                nyfikenhetsdriven utforskning - lika mycket f√∂r l√§rande som f√∂r kommunikation.</p>
        </div>
    </div>
    <div class="container-fluid text-center">
        <h1>Var b√∂rjar jag?</h1>
        <div class="mx-auto w-75 text-start">
            <p>Det b√§sta s√§ttet att komma ig√•ng med Meshtastic √§r helt enkelt att skaffa en enhet, sl√• p√• den och se vad
                som h√§nder. Du beh√∂ver ingen djup teknisk bakgrund eller n√•gon form av licens - bara nyfikenhet. Ju fler
                som ansluter och sl√•r p√• sina noder, desto starkare och mer anv√§ndbart blir n√§tverket. √Ñven om du inte
                h√∂r n√•gon direkt, s√• √∂kar din n√§rvaro chansen f√∂r andra i n√§rheten att f√• kontakt - och det √§r s√• n√§tverket v√§xer.</p>
            <p>N√§r du v√§l har b√∂rjat, ta g√§rna kontakt med andra som har experimenterat med Meshtastic ett tag. Det √§r en
                av anledningarna till att den h√§r webbplatsen finns - att hj√§lpa lokala eller regionala entusiaster att
                hitta varandra, dela erfarenheter och l√§ra sig tillsammans. Oavsett om du bygger en antenn eller vill
                f√∂rst√• olika firmwareinst√§llningar, s√• g√•r det snabbare (och blir roligare) n√§r man hj√§lps √•t.</p>
            <p>F√∂rutom lokalt st√∂d finns det ocks√• en v√§xande m√§ngd riktigt bra YouTube-videor och guider. Det finns
                en livlig onlinegemenskap som st√§ndigt delar tips, genomg√•ngar och nya id√©er. Och sj√§lvklart √§r den
                officiella <a href="https://meshtastic.org/">Meshtastic-webbplatsen</a> full av dokumentation, guider och forum som hj√§lper dig att f√∂rdjupa
                dig i din egen takt.</p>
        </div>
    </div>
    <div class="container-fluid text-center">
        <h1>Vilken enhetsroll ska jag v√§lja?</h1>
        <div class="mx-auto w-75 text-start">
            <p>Att v√§lja r√§tt enhetsroll i Meshtastic √§r viktigare √§n det f√∂rst kan verka. Varje roll best√§mmer hur din nod
                beter sig i n√§tverket - om den bara lyssnar, aktivt vidarebefordrar meddelanden, eller h√•ller sig helt tyst
                f√∂r att spara str√∂m. En korrekt inst√§lld roll hj√§lper mesh-n√§tverket att fungera effektivt och g√∂r din
                f√∂rsta upplevelse b√•de enklare och roligare.</p>
            <p>F√∂r de flesta nyb√∂rjare √§r det b√§st att b√∂rja med <strong>Client</strong> eller <strong>Client (Muted)</strong>.
                En Client √§r en enhet kopplad till appen eller som fungerar frist√•ende. Den kan skicka och ta emot meddelanden,
                och vidarebefordrar √§ven paket om ingen annan nod redan har gjort det. Den bidrar till n√§tverket utan att
                belasta det f√∂r mycket.</p>
            <p>En Client (Muted) d√§remot vidarebefordrar inte paket fr√•n andra noder. Den skickar och tar emot meddelanden
                precis som en vanlig klient, men deltar inte i routing. Den h√§r rollen passar bra om du vill minska
                n√§tverkstrafiken eller anv√§nda enheten passivt. ¬†</p>
            <p>N√§r du har blivit mer bekant med hur det lokala n√§tverket fungerar kan du √∂verv√§ga att byta till rollen Router.
                En Router-nod hj√§lper aktivt till att b√§ra vidare meddelanden i n√§tverket genom att vidarebefordra dem till
                andra enheter. Den h√§r rollen √§r avg√∂rande f√∂r att f√∂rl√§nga r√§ckvidden och f√∂rb√§ttra anslutningen, s√§rskilt
                i omr√•den med f√• anv√§ndare - men den kr√§ver bra planering mer str√∂m och b√∂r helst vara ig√•ng hela tiden. I
                b√∂rjan √§r det dock smartast att h√•lla det enkelt och b√∂rja som client.</p>
        </div>
    </div>

    <div id="footer-placeholder"></div>

    <script>
        fetch('footer.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('footer-placeholder').innerHTML = data;
            });
    </script>
    <script src="https://www.youtube.com/iframe_api"></script>

    <script>
        // Store all YouTube player objects keyed by their iframe's ID
        const youtubePlayers = {};
        let carouselInstance; // Store the Bootstrap carousel instance

        // This function is called automatically by the YouTube Iframe API when it's ready.
        function onYouTubeIframeAPIReady() {
            // Find all iframes with a specific class or ID pattern if you have multiple videos
            // For now, we'll assume a single video with id="youtubeVideo1"
            const videoIframes = document.querySelectorAll('iframe[id^="youtubeVideo"]');

            videoIframes.forEach(iframe => {
                const iframeId = iframe.id;
                // Ensure the src has enablejsapi=1 for API control
                if (!iframe.src.includes('enablejsapi=1')) {
                    const url = new URL(iframe.src);
                    url.searchParams.set('enablejsapi', '1');
                    url.searchParams.set('version', '3'); // Good practice for modern API
                    url.searchParams.set('rel', '0'); // To prevent related videos at the end
                    iframe.src = url.toString();
                }

                youtubePlayers[iframeId] = new YT.Player(iframeId, {
                    events: {
                        'onReady': (event) => {
                            // console.log(`Youtubeer for ${iframeId} is ready.`);
                        },
                        'onStateChange': (event) => handlePlayerStateChange(event, iframeId)
                    }
                });
            });

            setupCarouselBehavior();
        }

        // Configure carousel interactions
        function setupCarouselBehavior() {
            const carouselElement = document.getElementById('cardCarousel');
            carouselInstance = new bootstrap.Carousel(carouselElement, {
                interval: 4000 // Set your desired auto-slide interval
            });

            // Listen for the 'slide.bs.carousel' event, which fires *before* the transition starts.
            // This is the ideal place to pause the currently active video.
            carouselElement.addEventListener('slide.bs.carousel', event => {
                const currentActiveItem = carouselElement.querySelector('.carousel-item.active');
                if (currentActiveItem) {
                    const currentVideoIframe = currentActiveItem.querySelector('iframe[id^="youtubeVideo"]');
                    if (currentVideoIframe && youtubePlayers[currentVideoIframe.id]) {
                        const player = youtubePlayers[currentVideoIframe.id];
                        // Only try to pause if the player is in a state that allows it (playing or buffering)
                        const playerState = player.getPlayerState();
                        if (playerState === YT.PlayerState.PLAYING || playerState === YT.PlayerState.BUFFERING) {
                            player.pauseVideo();
                            // console.log(`Video on slide ${currentVideoIframe.id} paused.`);
                        }
                    }
                }
            });

            // Listen for 'slid.bs.carousel' if you want to perform actions on the *new* slide
            // (e.g., auto-play the video on the new slide, though this can be annoying for users)
            carouselElement.addEventListener('slid.bs.carousel', event => {
                // Example: If you wanted to auto-play the video on the new slide:
                // const newActiveItem = event.relatedTarget;
                // const newVideoIframe = newActiveItem.querySelector('iframe[id^="youtubeVideo"]');
                // if (newVideoIframe && youtubePlayers[newVideoIframe.id]) {
                //     youtubePlayers[newVideoIframe.id].playVideo();
                // }
            });
        }

        // Handle video state changes
        function handlePlayerStateChange(event, iframeId) {
            // When a video starts playing, pause the carousel
            if (event.data === YT.PlayerState.PLAYING) {
                if (carouselInstance) {
                    carouselInstance.pause();
                    // console.log(`Carousel paused because video ${iframeId} is playing.`);
                }
            }
            // When a video is paused or ended by the user, resume the carousel IF no other video is playing
            else if (event.data === YT.PlayerState.PAUSED || event.data === YT.PlayerState.ENDED) {
                let anyVideoPlaying = false;
                for (const id in youtubePlayers) {
                    if (youtubePlayers.hasOwnProperty(id)) {
                        const player = youtubePlayers[id];
                        // Check if the player exists, is ready, and is currently playing
                        if (player && typeof player.getPlayerState === 'function' && player.getPlayerState() === YT.PlayerState.PLAYING) {
                            anyVideoPlaying = true;
                            break;
                        }
                    }
                }

                if (!anyVideoPlaying && carouselInstance) {
                    carouselInstance.cycle(); // Resume auto-cycling
                    // console.log(`Carousel resumed because video ${iframeId} paused/ended and no other videos are playing.`);
                }
            }
        }
    </script>
</body>
</html>
